!function(g){"use strict";g.maxmegamenu=function(e,n){var s=this,l=g(e),t={event:l.attr("data-event"),effect:l.attr("data-effect"),effect_speed:parseInt(l.attr("data-effect-speed")),panel_width:l.attr("data-panel-width"),panel_inner_width:l.attr("data-panel-inner-width"),second_click:l.attr("data-second-click"),vertical_behaviour:l.attr("data-vertical-behaviour"),document_click:l.attr("data-document-click"),breakpoint:l.attr("data-breakpoint"),unbind_events:l.attr("data-unbind")};s.settings={};var i=g("li.mega-menu-megamenu.mega-menu-item-has-children,li.mega-menu-flyout.mega-menu-item-has-children,li.mega-menu-tabbed > ul.mega-sub-menu > li.mega-menu-item-has-children,li.mega-menu-flyout li.mega-menu-item-has-children",e);s.hidePanel=function(e,n){n||"slide"!=s.settings.effect?(n&&e.siblings(".mega-sub-menu").css("display","none").delay(s.settings.effect_speed).queue(function(){g(this).css("display","").dequeue()}),e.siblings(".mega-sub-menu").find(".widget_media_video video").each(function(){this.player.pause()}),e.parent().removeClass("mega-toggle-on").triggerHandler("close_panel"),s.addAnimatingClass(e.parent())):e.siblings(".mega-sub-menu").animate({height:"hide"},s.settings.effect_speed,function(){e.siblings(".mega-sub-menu").css("display",""),e.parent().removeClass("mega-toggle-on").triggerHandler("close_panel")})},s.addAnimatingClass=function(e){if("disabled"!==s.settings.effect){g(".mega-animating").removeClass("mega-animating");var n=s.settings.effect_speed+parseInt(megamenu.timeout,10);e.addClass("mega-animating"),setTimeout(function(){e.removeClass("mega-animating")},n)}},s.hideAllPanels=function(){g(".mega-toggle-on > a.mega-menu-link",l).each(function(){s.hidePanel(g(this),!1)})},s.hideSiblingPanels=function(e,n){e.parent().parent().find(".mega-toggle-on").children("a.mega-menu-link").each(function(){s.hidePanel(g(this),n)})},s.isDesktopView=function(){return Math.max(window.outerWidth,g(window).width())>s.settings.breakpoint},s.isMobileView=function(){return!s.isDesktopView()},s.showPanel=function(e){g(".mega-animating").removeClass("mega-animating"),s.isMobileView()&&e.parent().hasClass("mega-hide-sub-menu-on-mobile")||(s.isDesktopView()&&(l.hasClass("mega-menu-horizontal")||l.hasClass("mega-menu-vertical"))&&s.hideSiblingPanels(e,!0),(s.isMobileView()&&l.hasClass("mega-keyboard-navigation")||"accordion"===s.settings.vertical_behaviour)&&s.hideSiblingPanels(e,!1),s.calculateDynamicSubmenuWidths(e),"slide"==s.settings.effect&&e.siblings(".mega-sub-menu").css("display","none").animate({height:"show"},s.settings.effect_speed),e.parent().addClass("mega-toggle-on").triggerHandler("open_panel"))},s.calculateDynamicSubmenuWidths=function(e){if(e.parent().hasClass("mega-menu-megamenu")&&s.settings.panel_width&&0<g(s.settings.panel_width).length)if(s.isDesktopView()){var n=l.offset(),t=g(s.settings.panel_width).offset();e.siblings(".mega-sub-menu").css({width:g(s.settings.panel_width).outerWidth(),left:t.left-n.left+"px"})}else e.siblings(".mega-sub-menu").css({width:"",left:""});if(e.parent().hasClass("mega-menu-megamenu")&&s.settings.panel_inner_width&&0<g(s.settings.panel_inner_width).length){var i=0;i=g(s.settings.panel_inner_width).length?parseInt(g(s.settings.panel_inner_width).width(),10):parseInt(s.settings.panel_inner_width,10);var a=parseInt(e.siblings(".mega-sub-menu").innerWidth(),10);s.isDesktopView()&&0<i&&i<a?e.siblings(".mega-sub-menu").css({paddingLeft:(a-i)/2+"px",paddingRight:(a-i)/2+"px"}):e.siblings(".mega-sub-menu").css({paddingLeft:"",paddingRight:""})}};s.unbindAllEvents=function(){g("ul.mega-sub-menu, li.mega-menu-item, a.mega-menu-link",e).off().unbind()},s.unbindClickEvents=function(){g("> a.mega-menu-link",i).off("click.megamenu touchend.megamenu")},s.unbindHoverEvents=function(){i.unbind("mouseenter.megamenu mouseleave.megamenu")},s.unbindHoverIntentEvents=function(){i.unbind("mouseenter mouseleave").removeProp("hoverIntent_t").removeProp("hoverIntent_s")},s.unbindMegaMenuEvents=function(){"hover_intent"===s.settings.event&&s.unbindHoverIntentEvents(),"hover"===s.settings.event&&s.unbindHoverEvents(),s.unbindClickEvents()},s.bindMegaMenuEvents=function(){var n;s.isDesktopView()&&"hover_intent"===s.settings.event&&i.hoverIntent({over:function(){s.unbindClickEvents(),g(this).hasClass("mega-toggle-on")||s.showPanel(g(this).children("a.mega-menu-link"))},out:function(){g(this).hasClass("mega-toggle-on")&&!g(this).parent().parent().hasClass("mega-menu-tabbed")&&s.hidePanel(g(this).children("a.mega-menu-link"),!1)},timeout:megamenu.timeout,interval:megamenu.interval}),s.isDesktopView()&&"hover"===s.settings.event&&i.on({"mouseenter.megamenu":function(){s.unbindClickEvents(),g(this).hasClass("mega-toggle-on")||s.showPanel(g(this).children("a.mega-menu-link"))},"mouseleave.megamenu":function(){g(this).hasClass("mega-toggle-on")&&!g(this).parent().parent().hasClass("mega-menu-tabbed")&&s.hidePanel(g(this).children("a.mega-menu-link"),!1)}}),n=!1,g(document).on({touchmove:function(e){n=!0},touchstart:function(e){n=!1}}),g(document).on("click touchend",function(e){n||"collapse"!==s.settings.document_click||g(e.target).closest(".mega-menu li").length||g(e.target).closest(".mega-menu-toggle").length||s.hideAllPanels(),n=!1}),g("> a.mega-menu-link",i).on("click.megamenu touchend.megamenu",function(e){"touchend"===e.type&&(s.unbindHoverEvents(),s.unbindHoverIntentEvents()),s.isDesktopView()&&g(this).parent().hasClass("mega-toggle-on")&&g(this).parent().parent().parent().hasClass("mega-menu-tabbed")?e.preventDefault():n||s.isMobileView()&&g(this).parent().hasClass("mega-hide-sub-menu-on-mobile")||("go"===s.settings.second_click||g(this).parent().hasClass("mega-click-click-go")?g(this).parent().hasClass("mega-toggle-on")||(e.preventDefault(),s.showPanel(g(this))):(e.preventDefault(),g(this).parent().hasClass("mega-toggle-on")?s.hidePanel(g(this),!1):s.showPanel(g(this))))}),g("body").on("keyup",function(e){27===(e.keyCode||e.which)&&(l.removeClass("mega-keyboard-navigation"),s.hideAllPanels()),l.hasClass("mega-keyboard-navigation")&&!g(event.target).closest(".mega-menu li").length&&(l.removeClass("mega-keyboard-navigation"),s.hideAllPanels())}),l.parent().on("keyup",function(e){var n=e.keyCode||e.which,t=g(e.target);9===n&&(l.addClass("mega-keyboard-navigation"),t.parent().is(i)?s.showPanel(t):s.hideSiblingPanels(t),t.hasClass("mega-menu-toggle")&&t.toggleClass("mega-menu-open"))})},s.monitorView=function(){s.isDesktopView()?l.data("view","desktop"):(l.data("view","mobile"),s.switchToMobile()),s.checkWidth(),g(window).resize(function(){s.checkWidth()})},s.checkWidth=function(){s.isMobileView()&&"desktop"===l.data("view")&&(l.data("view","mobile"),s.switchToMobile()),s.isDesktopView()&&"mobile"===l.data("view")&&(l.data("view","desktop"),s.switchToDesktop()),s.isDesktopView()&&s.calculateDynamicSubmenuWidths(g("li.mega-menu-megamenu.mega-toggle-on > a.mega-menu-link",l))},s.reverseRightAlignedItems=function(){g("body").hasClass("rtl")||l.append(l.children("li.mega-item-align-right").get().reverse())},s.switchToMobile=function(){s.unbindMegaMenuEvents(),s.bindMegaMenuEvents(),s.reverseRightAlignedItems(),s.hideAllPanels()},s.switchToDesktop=function(){s.unbindMegaMenuEvents(),s.bindMegaMenuEvents(),s.reverseRightAlignedItems(),s.hideAllPanels()},s.init=function(){l.triggerHandler("before_mega_menu_init"),s.settings=g.extend({},t,n),l.removeClass("mega-no-js"),l.siblings(".mega-menu-toggle").on("click",function(e){g(e.target).is(".mega-menu-toggle-block, .mega-menu-toggle")&&g(this).toggleClass("mega-menu-open")}),"true"==s.settings.unbind_events&&s.unbindAllEvents(),s.bindMegaMenuEvents(),s.monitorView(),l.triggerHandler("after_mega_menu_init")},s.init()},g.fn.maxmegamenu=function(n){return this.each(function(){if(void 0===g(this).data("maxmegamenu")){var e=new g.maxmegamenu(this,n);g(this).data("maxmegamenu",e)}})},g(function(){g(".mega-menu").maxmegamenu()})}(jQuery);